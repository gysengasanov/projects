import telebot
import aiogram
import logging
from telebot import types
import random
from random import randint
from random import choice
import numpy as np
from aiogram import Bot, Dispatcher, executor, types
import sqlite3
from aiogram.dispatcher import Dispatcher
from aiogram.utils import executor
from pyrogram import Client , filters
from pyrogram.errors import FloodWait
import time
from time import sleep
TOKEN = ''
bot = Bot(token=TOKEN)
class Database:
	def __init__(self,db_file):
		self.connection = sqlite3.connect(db_file)
		self.cursor = self.connection.cursor()

	def add_user(self, user_id):
		with self.connection:
			return self.cursor.execute("INSERT INTO 'users' ('user_id') VALUES (?)", (user_id,))

	def user_exists(self, user_id):
		with self.connection:
			result = self.cursor.execute('SELECT * FROM "users" WHERE "user_id" = ?', (user_id,)).fetchall()
			return bool(len(result))

	def set_nickname(self, user_id, nickname):
		with self.connection:
			return self.cursor.execute('UPDATE "users" SET "nickname" = ? WHERE "user_id" = ?', (nickname, user_id,))

	def get_signup(self,user_id):
		with self.connection:
			result = self.cursor.execute('SELECT "signup" FROM "users" WHERE "user_id" = ?',(user_id,)).fetchall()
			for row in result:
				signup = str(row[0])
			return signup

	def set_signup(self, user_id, signup):
		with self.connection:
			return self.cursor.execute('UPDATE "users" SET "signup" = ? WHERE "user_id" = ?', (signup, user_id,))

	def get_nickname(self,user_id):
		with self.connection:
			result = self.cursor.execute('SELECT "nickname" FROM "users" WHERE "user_id" = ?',(user_id,)).fetchall()
			for row in result:
				nickname = str(row[0])
			return nickname

db = Database('reg.db')




def buy():
	markup = types.InlineKeyboardMarkup(row_width=True)
	link_keyboard2 = types.InlineKeyboardButton(text="üí¶–ö—É–ø–∏—Ç—å —Å–ª–∏–≤ 189–†üí¶", url=" ")
	markup.add(link_keyboard2)

	return markup

def pod():
	markup = types.InlineKeyboardMarkup(row_width=True)
	link_keyboard2 = types.InlineKeyboardButton(text="üíüVipKa 99–†", url="")
	markup.add(link_keyboard2)

	return markup

def ryadom():
	markup = types.ReplyKeyboardMarkup(resize_keyboard = True)
	item1 = types.KeyboardButton('üöÄ–ù–∞–π—Ç–∏ —Å–ª–∏–≤üöÄ')
	back = types.KeyboardButton('üöÑ–ù–∞–∑–∞–¥')
	markup.add(item1, back)
	return markup

def random():
	markup = types.InlineKeyboardMarkup(row_width=True)
	link_keyboard5 = types.InlineKeyboardButton(text="–£–≤–∏–¥–µ—Ç—å –¥–µ–≤—É—à–µ–∫ üåè–ü–æ–±–ª–∏–∑–æ—Å—Ç–∏ 49—Ä", url="")
	markup.add(link_keyboard5)
	return markup






def start_markup():
	markup = types.InlineKeyboardMarkup(row_width=True)
	link_keyboard2 = types.InlineKeyboardButton(text="ü§§–ö—É–ø–∏—Ç—å –ü–æ–¥–ø–∏—Å–∫—Éü§§", url="")
	markup.add(link_keyboard2)

	return markup

logging.basicConfig(level=logging.INFO)
dp = Dispatcher(bot)

@dp.message_handler(commands=['start'])
async def start(message: types.Message):
	if(not db.user_exists(message.from_user.id)):
		db.add_user(message.from_user.id)
		await bot.send_message(message.from_user.id, 'üí¨–£–∫–∞–∂–∏—Ç–µ –≤–∞—à –Ω–∏–∫')
	else:
		await bot.send_message(message.from_user.id, '‚ù§–í—ã —É–∂–µ –∑–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã')
		chat_id = message.chat.id
		first_name = message.chat.first_name
		
		p = open("G:\\photo_2022-04-09_07-01-51.jpg", 'rb')
		a = open("G:\\vid24\\photo_2022-10-26_07-37-25.jpg", 'rb')
		b = open("G:\\vid24\\photo_2022-10-26_07-40-09.jpg", 'rb')
		c = open("G:\\vid24\\photo_2022-10-24_06-07-33.jpg", 'rb')
		n = open("G:\\vid24\\photo_2022-10-07_03-24-53.jpg", 'rb')
		m = open("G:\\vid24\\photo_2022-09-28_14-53-56.jpg", 'rb')
		z = np.random.randint(1,7)
		print(z)
		if z == 1:
			await bot.send_photo(chat_id=message.chat.id, photo=p)
		elif z == 2:
			await bot.send_photo(chat_id=message.chat.id, photo=a)
		elif z == 3:
			await bot.send_photo(chat_id=message.chat.id, photo=b)
		elif z == 4:
			await bot.send_photo(chat_id=message.chat.id, photo=c)
		elif z == 5:
			await bot.send_photo(chat_id=message.chat.id, photo=n)
		elif z == 6:
			await bot.send_photo(chat_id=message.chat.id, photo=m)


		markup = types.ReplyKeyboardMarkup(resize_keyboard = True)

		item1 = types.KeyboardButton('üí¶–ö—É–ø–∏—Ç—å —Å–ª–∏–≤')
		item2 = types.KeyboardButton('üíüVipKa')
		item3 = types.KeyboardButton('üåè–°–ª–∏–≤ —Ä—è–¥–æ–º')
		item4 = types.KeyboardButton('üë§–ú–æ–π –ü—Ä–æ—Ñ–∏–ª—å')

		markup.add(item1, item2,item3,item4)
		await bot.send_message(chat_id, f'–ü—Ä–∏–≤–µ—Ç,{first_name}üòò\n\n–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ —Å–ª–∏–≤ –ª—é–±–æ–π –±–ª–æ–≥–µ—Ä—à–∏/—Å—Ç—Ä–∏–º–µ—Ä—à–∏/–∏–∑–≤–µ—Å—Ç–Ω–æ–π –ª–∏—á–Ω–æ—Å—Ç–∏!\n\n–ê —Ç–∞–∫–∂–µ –Ω–∞–π—Ç–∏ —Å–ª–∏–≤üîû —Å–≤–æ–µ–π –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏—Ü—ã/–æ–¥–Ω–æ–∫—É—Ä—Å–Ω–∏—Ü—ã/—Å–æ—Å–µ–¥–∫–∏/–ø–æ–¥—Ä—É–≥–∏ '.format(message.from_user), reply_markup = markup)



	
@dp.message_handler()
async def bot_message(message: types.Message):
	
	if message.chat.type == 'private':
		if message.text == 'üë§–ú–æ–π –ü—Ä–æ—Ñ–∏–ª—å':
			user_nickname = 'üë§–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ' + db.get_nickname(message.from_user.id)
			await bot.send_message(message.from_user.id,f'{user_nickname}\n\n–°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏: üîí–ù–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞\n\nüßæ–ú–æ–∏ —Ç–æ–≤–∞—Ä—ã - –ù–µ –Ω–∞–π–¥–µ–Ω–æ\n\n–ü–æ–¥–¥–µ—Ä–∂–∫–∞ - @quteVasilisa')
			

		else:
			if db.get_signup(message.from_user.id) == 'setnickname':
				if(len(message.text)> 15):
					await bot.send_message(message.from_user.id, '–ù–∏–∫–Ω–µ–π–º –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 15 —Å–∏–º–≤–æ–ª–æ–≤‚ùó')
				elif '@' in message.text or '/' in message.text:
					await bot.send_message(message.from_user.id, '–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã @ /‚ùó')

			
				else:
					db.set_nickname(message.from_user.id, message.text)
					db.set_signup(message.from_user.id, 'done')
					await bot.send_message(message.from_user.id, 'successfully reg')
					chat_id = message.chat.id
					first_name = message.chat.first_name
		
					p = open("G:\\photo_2022-04-09_07-01-51.jpg", 'rb')
					a = open("G:\\vid24\\photo_2022-10-26_07-37-25.jpg", 'rb')
					b = open("G:\\vid24\\photo_2022-10-26_07-40-09.jpg", 'rb')
					c = open("G:\\vid24\\photo_2022-10-24_06-07-33.jpg", 'rb')
					z = np.random.randint(1,5)
					print(z)
					if z == 1:
						await bot.send_photo(chat_id=message.chat.id, photo=p)
					elif z == 2:
						await bot.send_photo(chat_id=message.chat.id, photo=a)
					elif z == 3:
						await bot.send_photo(chat_id=message.chat.id, photo=b)
					elif z == 4:
						await bot.send_photo(chat_id=message.chat.id, photo=c)


					markup = types.ReplyKeyboardMarkup(resize_keyboard = True)

					item1 = types.KeyboardButton('üí¶–ö—É–ø–∏—Ç—å —Å–ª–∏–≤')
					item2 = types.KeyboardButton('üíüVipKa')
					item3 = types.KeyboardButton('üåè–°–ª–∏–≤ —Ä—è–¥–æ–º')
					item4 = types.KeyboardButton('üë§–ú–æ–π –ü—Ä–æ—Ñ–∏–ª—å')

					markup.add(item1, item2,item3,item4)
					await bot.send_message(chat_id, f'–ü—Ä–∏–≤–µ—Ç,{first_name}üòò\n\n–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ —Å–ª–∏–≤ –ª—é–±–æ–π –±–ª–æ–≥–µ—Ä—à–∏/—Å—Ç—Ä–∏–º–µ—Ä—à–∏/–∏–∑–≤–µ—Å—Ç–Ω–æ–π –ª–∏—á–Ω–æ—Å—Ç–∏!\n\n–ê —Ç–∞–∫–∂–µ –Ω–∞–π—Ç–∏ —Å–ª–∏–≤üîû —Å–≤–æ–µ–π –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏—Ü—ã/–æ–¥–Ω–æ–∫—É—Ä—Å–Ω–∏—Ü—ã/—Å–æ—Å–µ–¥–∫–∏/–ø–æ–¥—Ä—É–≥–∏ '.format(message.from_user), reply_markup = markup)

		if message.text == 'üí¶–ö—É–ø–∏—Ç—å —Å–ª–∏–≤':
			await bot.send_message(message.chat.id, f'–ö—É–ø–∏–≤ —Å–ª–∏–≤üí¶, –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∞—Ä—Ö–∏–≤ —Å —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ.\n\n–í –∞—Ä—Ö–∏–≤–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –±–æ–ª–µ–µ 1521 –≤–∏–¥–µ–æ –∏ 3651 —Ñ–æ—Ç–æ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –ª–∏—á–Ω–æ—Å—Ç—è–º–∏\n\n–î—É–º–∞–µ—Ç–µ:"–ë–ª–∏–Ω, –∫–∞–∫ –∂–µ —è –∑–∞–≥—Ä—É–∂—É —ç—Ç–æ –Ω–∞ —Å–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω"?\n\n–ù–∞—à –æ—Ç–≤–µ—Ç - "–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø:\n–∫ –±–æ—Ç—É,–∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —Å–º–æ–∂–µ—Ç–µ –Ω–∞ –≤–∞—à–µ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –∫–∞—á–∞—Ç—å –Ω—É–∂–Ω—ã–µ –≤–∏–¥–µ–æ –∏ —Ñ–æ—Ç–æ!',reply_markup = buy())
				
		elif message.text == 'üíüVipKa':
			await bot.send_message(message.chat.id, f'üíî–í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞.\n\n"üíüVipKa" –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª—É\n\n–°–ø—Ä–æ—Å–∏—Ç–µ - "–¢–∞–∫ —á–µ–º –∂–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞ –æ—Ç –ø–æ–∫—É–ø–∫–∏ –∞—Ä—Ö–∏–≤–∞?"\n\n–ê –º—ã –æ—Ç–≤–µ—Ç–∏–º - "–ü–æ–¥–ø–∏—Å–∫–∞" - —ç—Ç–æ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤\n–≤—ã –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –±—É–¥–µ—Ç–µ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–≤–æ–π –≤–µ—á–µ—Ä–Ω–∏–π –∞—Ä—Å–µ–Ω–∞–ª!üîû', reply_markup = pod())
		elif message.text == 'üåè–°–ª–∏–≤ —Ä—è–¥–æ–º':
			await bot.send_message(message.chat.id, f'–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–ª–∏–≤–æ–≤ –≤ –Ω–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö\n\n–í –Ω–∞—à–µ–π –±–∞–∑–µ –±–æ–ª–µ–µ 7.5–º–ª—Ä–¥ –§–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –¥–µ–≤—É—à–µ–∫\n\n–í–µ–ª–∏–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å,—á—Ç–æ –º—ã –Ω–∞–π–¥—ë–º –∏ –≤–∞—à—É!', reply_markup = ryadom())
		elif message.text == 'üöÄ–ù–∞–π—Ç–∏ —Å–ª–∏–≤üöÄ':
			a = np.random.randint(3,7)
			await bot.send_message(message.chat.id, f'üåè–ü–æ–±–ª–∏–∑–æ—Å—Ç–∏ –∫ –≤–∞–º –Ω–∞—à–ª–∏—Å—å —Å–ª–∏–≤—ã {a} –¥–µ–≤—É—à–µ–∫ü§≥\n\n–ñ–µ–ª–∞–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å?üëÄ',reply_markup =random())
		elif message.text == 'üöÑ–ù–∞–∑–∞–¥':
			chat_id = message.chat.id
			markup = types.ReplyKeyboardMarkup(resize_keyboard = True)
			item1 = types.KeyboardButton('üí¶–ö—É–ø–∏—Ç—å —Å–ª–∏–≤')
			item2 = types.KeyboardButton('üíüVipKa')
			item3 = types.KeyboardButton('üåè–°–ª–∏–≤ —Ä—è–¥–æ–º')
			item4 = types.KeyboardButton('üë§–ú–æ–π –ü—Ä–æ—Ñ–∏–ª—å')
			markup.add(item1, item2,item3,item4)
			await bot.send_message(chat_id, f'–ù–∞–∑–∞–¥üöÑ', reply_markup = markup)

			


if __name__ == '__main__':

	executor.start_polling(dp , skip_updates = True)
